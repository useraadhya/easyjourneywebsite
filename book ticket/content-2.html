<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="login.css">
    <link rel="stylesheet" href="homepage-tabs.css">
    <link rel="stylesheet" href="tabs.css">
</head>
<body>
    <div class = "header">
        <div>
            <h1><span style="color:red;">E</span>asy <span style="color:red;">J</span>ourney</h1>
        </div>
        <nav>
            <ul id = "MenuItems">
                <li><a href ='./homepage.html' id="register_in_header">Register</a></li>
                <li><a href ='./content-2.html'  >Login</a></li>
               
                <li><a href ='./content-4.html' >Book Ticket</a></li>
                <li><a href ='./content-3.html' >Contact Us </a></li>
            </ul>
    </nav>

</div>

    <div id ="login-content" class="content-2">
        <div  class="login">
            <img  class="logo" src="imgs/logo.png">
            <h1 style="text-shadow: 1px 2px 2px black,0 0 25px blue,0 0 5px darkblue;color:green;">Log In </h1>
                <form><input class="box1" type="email" placeholder="Email" id="emaillogin"></form>
                <form><input class="box2" type="password" name="password" id="passwordlogin" placeholder="Password" autocomplete="off
                    "></form>
                <!-- <a href="http://127.0.0.1:5503/forget.html" target="_blank">Forgot Password?</a> -->
                <div class="but" id="login"><button class="login-button">Login</button></div>
        </div>
        
       </div>
         <!-- <script type="module"> 
        //  alert('please login or signup')
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.18.0/firebase-app.js";
        import { getDatabase,set,ref,update } from "https://www.gstatic.com/firebasejs/9.18.0/firebase-database.js";
        import { getAuth, createUserWithEmailAndPassword,signInWithEmailAndPassword,onAuthStateChanged} from "https://www.gstatic.com/firebasejs/9.18.0/firebase-auth.js";
    
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        const firebaseConfig = {
          apiKey: "AIzaSyAUbLCNjWlJ3TuQbk2f9fjWJC18ZqPb6Ww",
          authDomain: "easy-journey-f0ca4.firebaseapp.com",
          databaseURL: "https://easy-journey-f0ca4-default-rtdb.firebaseio.com",
          projectId: "easy-journey-f0ca4",
          storageBucket: "easy-journey-f0ca4.appspot.com",
          messagingSenderId: "669995326577",
          appId: "1:669995326577:web:002bce391c6bbce78dcfd0"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database=getDatabase(app);
        const auth = getAuth();
    
       
    
    
     const login =document.getElementById("login");
    // console.log(login)
    document.getElementById("login").addEventListener('click',(e)=>{
        var email=document.getElementById('emaillogin').value
        var password=document.getElementById('passwordlogin').value
        // e.preventDefault()
    signInWithEmailAndPassword(auth, email, password)
      .then((userCredential) => {
       
        // Signed in 
        const user = userCredential.user;
        const dt= new Date();
        // ...
        update(ref(database,'users/'+user.uid),{
        last_login:dt,
      })
      alert('user login successful')
    })
      .catch((error) => {
        const errorCode = error.code;
        const errorMessage = error.message;
        console.log(error);
        // alert(errorMessage)
       
      });
    });
    
     onAuthStateChanged(auth, (user) => {
       if (user) {
         // User is signed in, see docs for a list of available properties
         // https://firebase.google.com/docs/reference/js/firebase.User
         const uid = user.uid;
         // ...
       } else {
         // User is signed out
         // ...
       }
     });
     </script>   -->
     <!-- <script type="module" src="./firebase.js"></script> -->
</body>
  <script type="module" src="./firebase.js"></script> 

</html>
